{% extends 'base/base-nav.html' %}

{% block extra_head %}
<script>
  function confirmDelete() {
    const confirmation = confirm("Are you sure you want to delete this item?");
    if (confirmation) {
      document.getElementById("delete-form").submit();
    }
  }
</script>
{% endblock %}

{% block title %}Profile{% endblock %}

{% block content %}
<div class="container mx-auto flex flex-col gap-8 max-w-5xl">
  <div class="prose">
    <h1>Settings</h1>
  </div>
  <!-- User Details Card -->
  <c-light-card>
    <div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:gap-8">
      <figure class="mx-auto sm:mx-0">
        {% if user.image %}
        <img src="{{ user.image.url }}" alt="{{ user.first_name }} {{ user.last_name }}"
          class="rounded-full w-48 h-48 object-cover" />
        {% else %}
        <img src="https://t3.ftcdn.net/jpg/09/64/89/20/360_F_964892089_vioRltmAxaoQEBLtYtChVBxIzDWwhA3T.jpg"
          alt="{{ user.first_name }} {{ user.last_name }}" class="rounded-full w-48 h-48 object-cover" />
        {% endif %}
      </figure>
      <div class="flex flex-col gap-2">
        <div class="flex gap-2 flex-col items-center sm:flex-row">
          <h2 class="card-title text-3xl text-center sm:text-start">{{ user.first_name }} {{ user.last_name }}</h2>
          <span class="badge">@{{ user.username }}</span>
        </div>
        <div class="flex flex-col gap-1">
          <c-icon-text>
            <c-slot name="icon">
              <div class="mt-0.5">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5">
                  <path d="M3 4a2 2 0 0 0-2 2v1.161l8.441 4.221a1.25 1.25 0 0 0 1.118 0L19 7.162V6a2 2 0 0 0-2-2H3Z" />
                  <path
                    d="m19 8.839-7.77 3.885a2.75 2.75 0 0 1-2.46 0L1 8.839V14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.839Z" />
                </svg>
              </div>
            </c-slot>
            <c-slot name="text">{{ user.email }}</c-slot>
          </c-icon-text>
          <c-icon-text>
            <c-slot name="icon">
              <div class="mt-0.5">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5">
                  <path fill-rule="evenodd"
                    d="M9.664 1.319a.75.75 0 0 1 .672 0 41.059 41.059 0 0 1 8.198 5.424.75.75 0 0 1-.254 1.285 31.372 31.372 0 0 0-7.86 3.83.75.75 0 0 1-.84 0 31.508 31.508 0 0 0-2.08-1.287V9.394c0-.244.116-.463.302-.592a35.504 35.504 0 0 1 3.305-2.033.75.75 0 0 0-.714-1.319 37 37 0 0 0-3.446 2.12A2.216 2.216 0 0 0 6 9.393v.38a31.293 31.293 0 0 0-4.28-1.746.75.75 0 0 1-.254-1.285 41.059 41.059 0 0 1 8.198-5.424ZM6 11.459a29.848 29.848 0 0 0-2.455-1.158 41.029 41.029 0 0 0-.39 3.114.75.75 0 0 0 .419.74c.528.256 1.046.53 1.554.82-.21.324-.455.63-.739.914a.75.75 0 1 0 1.06 1.06c.37-.369.69-.77.96-1.193a26.61 26.61 0 0 1 3.095 2.348.75.75 0 0 0 .992 0 26.547 26.547 0 0 1 5.93-3.95.75.75 0 0 0 .42-.739 41.053 41.053 0 0 0-.39-3.114 29.925 29.925 0 0 0-5.199 2.801 2.25 2.25 0 0 1-2.514 0c-.41-.275-.826-.541-1.25-.797a6.985 6.985 0 0 1-1.084 3.45 26.503 26.503 0 0 0-1.281-.78A5.487 5.487 0 0 0 6 12v-.54Z"
                    clip-rule="evenodd" />
                </svg>
              </div>
            </c-slot>
            <c-slot name="text">{{ user.display_year_level }} {{ user.get_degree_display
              }}</c-slot>
          </c-icon-text>
          <c-icon-text>
            <c-slot name="icon">
              <div class="mt-0.5">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5">
                  <path
                    d="M10 9.25a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 0 0 .75-.75V10a.75.75 0 0 0-.75-.75H10ZM6 13.25a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 0 0 .75-.75V14a.75.75 0 0 0-.75-.75H6ZM8 13.25a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 0 0 .75-.75V14a.75.75 0 0 0-.75-.75H8ZM9.25 14a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75H10a.75.75 0 0 1-.75-.75V14ZM12 11.25a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 0 0 .75-.75V12a.75.75 0 0 0-.75-.75H12ZM12 13.25a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75h.01a.75.75 0 0 0 .75-.75V14a.75.75 0 0 0-.75-.75H12ZM13.25 12a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75H14a.75.75 0 0 1-.75-.75V12ZM11.25 10.005c0-.417.338-.755.755-.755h2a.755.755 0 1 1 0 1.51h-2a.755.755 0 0 1-.755-.755ZM6.005 11.25a.755.755 0 1 0 0 1.51h4a.755.755 0 1 0 0-1.51h-4Z" />
                  <path fill-rule="evenodd"
                    d="M5.75 2a.75.75 0 0 1 .75.75V4h7V2.75a.75.75 0 0 1 1.5 0V4h.25A2.75 2.75 0 0 1 18 6.75v8.5A2.75 2.75 0 0 1 15.25 18H4.75A2.75 2.75 0 0 1 2 15.25v-8.5A2.75 2.75 0 0 1 4.75 4H5V2.75A.75.75 0 0 1 5.75 2Zm-1 5.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h10.5c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25H4.75Z"
                    clip-rule="evenodd" />
                </svg>
              </div>
            </c-slot>
            <c-slot name="text">Joined {{ user.date_joined|date:"F d, Y" }}</c-slot>
          </c-icon-text>
        </div>
        <!-- Buttons to edit and change password -->
        <div class="flex gap-4 mt-4">
          <a href="{% url 'edit_profile' %}" class="btn flex items-center bg-[#62B096] text-white">
            <span>Edit Profile</span>
          </a>
          <a href="{% url 'password_change' %}" class="btn flex items-center bg-[#62B096] text-white">
            <span>Change Password</span>
          </a>
        </div>
      </div>
    </div>
  </c-light-card>
</div>

{% endblock %}